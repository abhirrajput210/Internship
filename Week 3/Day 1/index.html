<!DOCTYPE html>
<html>
    <head>
        <title>Week 3 : Day 1</title>
    </head>

    <body>
        <!-- <script src="myScript.js"></script> -->
             
    <!--    -------------- Wrong Document Pitfall ----------- -->
        <!-- <iframe src="/" id="iframe"></iframe>

        <script>
            let oldDoc = iframe.contentDocument;
            iframe.onload = function(){
                let newDoc = iframe.contentDocument;
                console.log(oldDoc == newDoc);
            };
        </script> -->

   <!-- -------------- Collection : Window.frames Example -------------- -->
 
        <!--<iframe src="/" id="iframe" name="win"></iframe>
        <script> -->
            <!-- console.log(iframe.contentWindow == frames[0]);
            console.log(iframe.contentWindow == frames.win);

            console.log(window.frames[0].parent == window);

            if(window == top){
                console.log("The Script Is In The TopMost Window");
            }else{
                console.log("The Script Is Not In The TopMost Window");
            } -->

        <!-- </script> -->

    <!-- -------------- File Example -------------- -->
 
        <!--<input type="file" onchange="showFile(this)">

        <script>

            function showFile(input){
                let file = input.files[0];

                console.log(`File Name : ${file.name}`);
                console.log(`Last Modified : ${file.lastModified}`);
            }

        </script> -->

    <!-- -------------- FileReader Example --------------            -->
 
        <!--<input type="file" onchange="readFile(this)">

        <script>
            function readFile(input){
                let file = input.files[0];

                let reader = new FileReader();

                reader.readAsText(file);

                reader.onload = function(){
                    console.log(reader.result);
                }

                reader.onerror = function(){
                    console.log(reader.error);
                }
            }
        </script> -->

    <!-- -------------- Fetch Example -------------- -->
 
        <!-- <script>
            let response = fetch("https://javascript.info/"); 
            if(response.ok){
                let json = response.json();
            }
            else{
                console.log("HTTP Error :" + response.status);
            }
        </script> -->
 

    <!-- -------------- Fetch Image Using BLOB --------------  -->

        <!--         
        let response = await fetch('/article/fetch/logo-fetch.svg');

        let blob = await response.blob(); // download as Blob object
    
        create <img> for it
        let img = document.createElement('img');
        img.style = 'position:fixed;top:10px;left:10px;width:100px';
        document.body.append(img);
    
        show it
        img.src = URL.createObjectURL(blob);
        setTimeout(() => { // hide after three seconds
        img.remove();
        URL.revokeObjectURL(img.src);
        }, 3000); -->

    <!-- -------------- Form Data Example --------------          -->

        <!-- <div id="output">
            <pre></pre>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded',() =>{
                let fd = new FormData();
                fd.append('Name','Abhishek');
                fd.append('Age',20);
                fd.append('Creation Date',Date.now());

                console.log(Array.from(fd));

                for(let ans of fd){
                    console.log(ans);
                }

            })

        </script> -->

    <!-- -------------- Fetch - Download Progress Example -------------- -->
        <!-- <script>
        let response = fetch('https://api.github.com/repos/javascript-tutorial/en.javascript.info/commits?per_page=100');

        const reader = response.body.getReader();

        // Step 2: get total length
        const contentLength = +response.headers.get('Content-Length');

        // Step 3: read the data
        let receivedLength = 0; // received that many bytes at the moment
        let chunks = []; // array of received binary chunks (comprises the body)
        while(true) {
            const {done, value} = reader.read();

            if (done) {
                break;
            }

            chunks.push(value);
            receivedLength += value.length;

            console.log(`Received ${receivedLength} of ${contentLength}`)
        }

        // Step 4: concatenate chunks into single Uint8Array
        let chunksAll = new Uint8Array(receivedLength); // (4.1)
        let position = 0;
        for(let chunk of chunks) {
            chunksAll.set(chunk, position); // (4.2)
            position += chunk.length;
        }

        // Step 5: decode into a string
        let result = new TextDecoder("utf-8").decode(chunksAll);

        // We're done!
        let commits = JSON.parse(result);
        alert(commits[0].author.login);

        </script> -->

    <!-- Abort Example Without Using Fetch -->

        <!-- <script>

            let controller = new AbortController();
            let signal = controller.signal;

            signal.addEventListener('abort', () => console.log("Mission Aborted"));

            controller.abort();

            console.log(signal.aborted);

        </script> -->

    <!-- -------------- Abort Example With Using Fetch -------------- -->

        <!-- <script>
            let controller = new AbortController();
            setTimeout(() => controller.abort(), 1000);

            try {
                let response = fetch('/article/fetch-abort/demo/hang', {
                signal: controller.signal
            });
            } catch(err) {
                if (err.name == 'AbortError') { // handle abort()
                alert("Aborted!");
            } else {
                throw err;
            }
                }
        </script> -->

    <!-- -------------- Example For All The Concepts -------------- -->
        <script>
            let p = fetch("https://goweather.herokuapp.com/weather/Ny")
            p.then((response) =>{
                console.log(response.status)
                console.log(response.ok)
                console.log(response.headers)
                return response.json()
            }).then((ans) =>{
                console.log(ans)
            })
        </script>
        

    </body>
</html>